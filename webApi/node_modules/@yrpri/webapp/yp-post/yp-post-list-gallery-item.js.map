{"version":3,"file":"yp-post-list-gallery-item.js","sourceRoot":"","sources":["../../src/yp-post/yp-post-list-gallery-item.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport './yp-post-gallery-image.js';\nimport './yp-post-actions.js';\nimport '../yp-magic-text/yp-magic-text.js';\nimport '@material/web/iconbutton/icon-button.js';\n\nimport { YpPostGalleryImage } from './yp-post-gallery-image.js';\n\n@customElement('yp-post-list-gallery-item')\nexport class YpPostListGalleryItem extends YpBaseElement {\n  @property({ type: Object })\n  post!: YpPostData;\n\n  @property({ type: Boolean, attribute: 'description-open' })\n  descriptionOpen = false;\n\n  @property({ type: Boolean })\n  mini = false;\n\n  @property({ type: Boolean })\n  isAudioCover = false;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .mainContainer {\n          margin: 32px;\n          margin-top: 48px;\n          margin-bottom: 16px;\n        }\n\n        .authorName,\n        .artName {\n          font-size: 26px;\n          line-height: 1.4;\n          min-width: 350px;\n        }\n\n        .authorName {\n          font-weight: bold;\n          padding-top: 8px;\n          width: 100%;\n        }\n\n        .artName {\n          padding-top: 0;\n        }\n\n        .description {\n          font-size: 20px;\n          line-height: 1.4;\n          text-align: right;\n          margin-bottom: 8px;\n        }\n\n        .descriptionText {\n          text-align: justify;\n          margin-bottom: 8px;\n          margin-top: 8px;\n        }\n\n        .image {\n          margin-bottom: 8px;\n        }\n\n        .postActions {\n          height: 30px;\n          margin-left: -16px;\n        }\n\n        .mainDataContainer {\n          max-width: 600px;\n          width: 600px;\n          border-top: 2px solid #000;\n        }\n\n        md-icon-button.openCloseButton {\n          --md-icon-button-icon-size: 48px;\n          width: 64px;\n          height: 64px;\n          padding-left: 0;\n          margin-left: 0;\n          align-self: flex-end;\n          justify-content: flex-end;\n          margin-right: -24px;\n          color: #000;\n        }\n\n        @media (max-width: 800px) {\n          .authorName,\n          .artName {\n            font-size: 26px;\n            min-width: 100%;\n            color: #000;\n          }\n\n          .image {\n            margin-bottom: 8px;\n          }\n\n          .mainDataContainer {\n            max-width: 100%;\n            width: 100%;\n          }\n        }\n\n        .shareIcon {\n          text-align: right;\n          width: 48px;\n          height: 48px;\n        }\n\n        .shareText {\n          font-size: 16px;\n          color: #656565;\n          margin-right: 5px;\n        }\n      `,\n    ];\n  }\n\n  renderShare() {\n    return html`\n      <div class=\"share\" ?hidden=\"${this.post.Group.configuration?.hideSharing}\">\n        <md-icon-button\n          class=\"shareIcon\"\n          .label=\"${this.t('share')}\"\n          @click=\"${this._shareTap}\"\n        >\n          <md-icon>share</md-icon>\n        </md-icon-button>\n        <div class=\"shareText\">${this.t('share')}</div>\n      </div>\n    `;\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout vertical mainContainer\">\n        <div class=\"layout vertical center-center\">\n          <yp-post-gallery-image\n            class=\"image\"\n            .post=\"${this.post}\"\n            .imageWidth=\"${this.post.public_data?.galleryImageData?.width}\"\n            .imageHeight=\"${this.post.public_data?.galleryImageData?.height}\"\n            alt-tag=\"${this.post.name}\"\n            sizing-mode=\"cover\"\n          ></yp-post-gallery-image>\n          <div class=\"layout vertical mainDataContainer\">\n            <div class=\"layout horizontal\">\n              <div class=\"layout vertical\">\n                <div class=\"authorName\">${this.post.description}</div>\n                <div class=\"artName\">${this.post.name}</div>\n                <yp-post-actions\n                  class=\"postActions\"\n                  .post=\"${this.post}\"\n                  larger-icons\n                  forceHideDebate\n                ></yp-post-actions>\n              </div>\n              <div class=\"flex\"></div>\n              <div class=\"layout vertical\">\n                ${!this.descriptionOpen\n                  ? html`\n                      <a\n                        href=\"${ifDefined(this._getPostLink(this.post))}\"\n                        id=\"mainA\"\n                        @click=\"${this._savePostToBackCache}\"\n                      >\n                        <md-icon-button class=\"openCloseButton\"\n                          ><md-icon>keyboard-arrow-right</md-icon></md-icon-button\n                        >\n                      </a>\n                    `\n                  : nothing}\n              </div>\n            </div>\n            ${this.descriptionOpen\n              ? html`\n                  ${this.renderShare()}\n                  <div class=\"description\">\n                    ${this.post.public_data?.galleryMetaData?.Upphafsar}\n                  </div>\n                  <div\n                    class=\"description\"\n                    ?hidden=\"${!this.post.public_data?.galleryMetaData?.Haed}\"\n                  >\n                    ${this.post.public_data?.galleryMetaData?.Haed} x\n                    ${this.post.public_data?.galleryMetaData?.Breidd}cm\n                  </div>\n                  <div\n                    class=\"description descriptionText\"\n                    ?hidden=\"${!this.post.public_data?.galleryMetaData?.texti_um_verk_fyrir_vef}\"\n                  >\n                    ${this.post.public_data?.galleryMetaData?.texti_um_verk_fyrir_vef}\n                  </div>\n                `\n              : nothing}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _savePostToBackCache() {\n    if (this.post) {\n      window.appGlobals.cache.cachedPostItem = this.post;\n    }\n  }\n\n  _getPostLink(post: YpPostData) {\n    if (post) {\n      if (\n        post.Group.configuration &&\n        post.Group.configuration.disablePostPageLink\n      ) {\n        return '#';\n      } else if (\n        post.Group.configuration &&\n        post.Group.configuration.resourceLibraryLinkMode\n      ) {\n        return post.description.trim();\n      } else {\n        return '/post/' + post.id;\n      }\n    } else {\n      console.warn('Trying to get empty post link');\n      return '#';\n    }\n  }\n\n  _sharedContent(event: CustomEvent) {\n    const shareData = event.detail;\n    window.appGlobals.activity(\n      'postShared',\n      shareData.social,\n      this.post ? this.post.id : -1\n    );\n  }\n\n  get _fullPostUrl() {\n    return encodeURIComponent(\n      'https://' + window.location.host + '/post/' + this.post.id\n    );\n  }\n\n  _shareTap(event: CustomEvent) {\n    window.appGlobals.activity(\n      'postShareCardOpen',\n      event.detail.brand,\n      this.post ? this.post.id : -1\n    );\n\n    window.appDialogs.getDialogAsync(\n      'shareDialog',\n      (dialog: YpShareDialogData) => {\n        dialog.open(\n          this._fullPostUrl,\n          this.post.name,\n          (this.$$('yp-post-gallery-image') as YpPostGalleryImage).anyImagePath || '',\n          this._sharedContent\n        );\n      }\n    );\n  }\n}\n\n"]}