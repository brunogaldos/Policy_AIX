{"version":3,"file":"ps-entities.js","sourceRoot":"","sources":["../../src/policies/ps-entities.ts"],"names":[],"mappings":"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","sourcesContent":["import { css, html, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport '@yrpri/webapp/common/yp-image.js';\n\nimport { PsStageBase } from '../base/ps-stage-base.js';\n\n//TDOO: Share from db config\nconst maxNumberOfSubProblems = 7;\n\n@customElement('ps-entities')\nexport class PsEntities extends PsStageBase {\n  @property({ type: Number })\n  activeEntityIndex: number | null = null;\n\n  maxNumberOfTopEntities = 4;\n\n  async connectedCallback() {\n    super.connectedCallback();\n    if (this.memory.groupId==2) {\n      this.maxNumberOfTopEntities = 4;\n    }\n    window.psAppGlobals.activity(`Sub Problems - open`);\n  }\n\n  updated(changedProperties: Map<string | number | symbol, unknown>): void {\n    super.updated(changedProperties);\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.psAppGlobals.activity(`Sub Problems - close`);\n  }\n\n  static get styles() {\n    return [\n      super.styles,\n      css`\n        .entity {\n          opacity: 1;\n          background-color: var(--md-sys-color-surface);\n          color: var(--md-sys-color-on-surface);\n          border-radius: 16px;\n          padding: 16px;\n          margin: 16px 0;\n          max-width: 960px;\n          width: 100%;\n        }\n\n        .entity.lessProminent {\n          opacity: 0.6;\n        }\n\n        .entityName {\n          font-size: 24px;\n          font-weight: 500;\n          margin-bottom: 16px;\n          color: var(--md-sys-color-primary);\n        }\n      `,\n    ];\n  }\n\n  render() {\n    const subProblems = this.memory.subProblems || [];\n    if (this.activeEntityIndex !== null) {\n      return this.renderEntityScreen(\n        subProblems[this.activeSubProblemIndex]!.entities[this.activeEntityIndex]!\n      );\n    } else if (this.activeSubProblemIndex !== null) {\n      return this.renderSubProblemScreen(\n        subProblems[this.activeSubProblemIndex]\n      );\n    } else {\n      return this.renderSubProblemList(subProblems, this.t('Sub Problems and Entities'));\n    }\n  }\n\n  renderSubProblemScreen(subProblem: IEngineSubProblem) {\n    return html`\n      <div class=\"topContainer layout vertical center-center\">\n        ${this.renderSubProblem(subProblem, false, 0, true, true)}\n        ${subProblem.entities.map((entity, entityIndex) => {\n          const isEntityLessProminent = entityIndex >= this.maxNumberOfTopEntities;\n          return html`\n            <div class=\"entity ${isEntityLessProminent ? 'lessProminent' : ''}\">\n              <div class=\"entityName\">${entity.name}</div>\n              ${entity.negativeEffects?.length > 0\n                ? html`\n                    <div>\n                      Negative Effects:\n                      <ul>\n                        ${entity.negativeEffects?.map(\n                          (effect) => html` <li>${effect}</li> `\n                        )}\n                      </ul>\n                    </div>\n                  `\n                : nothing}\n              ${entity.positiveEffects?.length > 0\n                ? html`\n                    <div>\n                      Positive Effects:\n                      <ul>\n                        ${entity.positiveEffects?.map(\n                          (effect) => html` <li>${effect}</li> `\n                        )}\n                      </ul>\n                    </div>\n                  `\n                : nothing}\n              ${!isEntityLessProminent\n                ? html`\n                    ${this.renderSearchQueries(\n                      this.t('Search queries for entity'),\n                      entity.searchQueries\n                    )}\n                    ${this.renderSearchResults(\n                      this.t('Webpages scanned for solutions to entites problems'),\n                      entity.searchResults\n                    )}\n                  `\n                : nothing}\n            </div>\n          `;\n        })}\n      </div>\n    `;\n  }\n\n  renderEntityScreen(entity: IEngineAffectedEntity) {\n    return html`\n      <div class=\"topContainer layout vertical\">\n        <div class=\"title\">${this.t('Problem Statement')}</div>\n        <div class=\"problemStatement\">\n          ${this.memory.problemStatement.description}\n        </div>\n\n        <div class=\"title\">${this.t('Sub Problems')}</div>\n\n      </div>\n    `;\n  }\n}\n"]}