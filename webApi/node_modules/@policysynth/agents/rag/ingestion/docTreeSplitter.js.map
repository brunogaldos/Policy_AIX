{"version":3,"file":"docTreeSplitter.js","sourceRoot":"","sources":["../../../src/rag/ingestion/docTreeSplitter.ts"],"names":[],"mappings":"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"}